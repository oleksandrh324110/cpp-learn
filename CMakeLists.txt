cmake_minimum_required(VERSION 3.5)
project(MyProject)

set(CMAKE_BUILD_TYPE Debug)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY bin)
set(CMAKE_MAKE_PROGRAM "${CMAKE_MAKE_PROGRAM} -s")

if(WIN32)
    set(CMAKE_EXECUTABLE_SUFFIX ".exe")
else()
    set(CMAKE_EXECUTABLE_SUFFIX "")
endif()

file(GLOB_RECURSE SOURCES CONFIGURE_DEPENDS "src/*.cpp")

add_executable(main${CMAKE_EXECUTABLE_SUFFIX} ${SOURCES})

add_custom_target(run
    COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main${CMAKE_EXECUTABLE_SUFFIX}
    DEPENDS main${CMAKE_EXECUTABLE_SUFFIX}
    WORKING_DIRECTORY ${CMAKE_BINARY_DIR}
)